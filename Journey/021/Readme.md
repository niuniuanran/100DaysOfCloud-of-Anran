# Architect Professional Prep - Day 8

## Blue/Green deployments with Elastic Beanstalk
To perform a blue/green deployment
- Open the Elastic Beanstalk console, and in the Regions list, select your AWS Region.
- Clone your current environment, or launch a new environment running the platform version you want.
- Deploy the new application version to the new environment.
- Test the new version on the new environment.
- On the environment overview page, choose Environment actions, and then choose **Swap environment URLs**.
- For Environment name, select the current environment.
- Choose Swap.
  
Elastic Beanstalk swaps the `CNAME` records of the old and new environments, redirecting traffic from the old version to the new version and vice versa.
After Elastic Beanstalk completes the swap operation, verify that the new environment responds when you try to connect to the old environment URL. 
> However, do not terminate your old environment until the DNS changes are propagated and your old DNS records expire. DNS servers don't necessarily clear old records from their cache based on the time to live (TTL) you set on your DNS records.

## AWS Batch
- AWS Batch **dynamically provisions** the optimal quantity and type of compute resources (e.g., CPU or memory optimized instances) based on the volume and specific resource requirements of the batch jobs submitted.
- There is no additional charge for AWS Batch. You only pay for the AWS resources (e.g. EC2 instances or Fargate jobs) you create to store and run your batch jobs.
- AWS Batch plans, **schedules**, and executes your batch computing workloads across the full range of AWS compute services and features, such as AWS Fargate, Amazon EC2 and Spot Instances. (No need to configure CloudWatch Events to schedule your jobs).

## AWS X-Ray
- AWS X-Ray helps developers **analyze and debug** production, distributed applications, such as those built using a microservices architecture. 
- AWS X-Ray **traces** user requests as they travel through your entire application.
- It aggregates the data generated by the individual services and resources that make up your application, providing you an **end-to-end view of how your application is performing**.
- AWS X-Ray works with **Amazon EC2, Amazon EC2 Container Service (Amazon ECS), AWS Lambda, and AWS Elastic Beanstalk**. You can use X-Ray with applications written in **Java, Node.js, and .NET** that are deployed on these services.

## AWS Glue
- AWS Glue uses the **AWS Glue Data Catalog** to store metadata about data sources, transforms, and targets - a metadata repository.
- You can use a **crawler** to populate the AWS Glue Data Catalog with tables. This is the primary method used by most AWS Glue users.

## Working with Streaming videos
### HLS
- HTTP Live Streaming (also known as HLS) is an HTTP-based adaptive bitrate streaming communications protocol.
- Kinesis Video Stream combined with HTL can be used to play live/archived videos on web app/browser or with third-party player.
- You do not need a video player to process streaming videos.

### Using Rekognition on Streaming Video
- You can use Amazon Rekognition Video to detect and recognize faces in streaming video. 
- Amazon Rekognition Video uses **Amazon Kinesis Video Streams** to receive and process a video stream. 
- The analysis results are output from Amazon Rekognition Video to a **Kinesis data stream** and then read by your client application. 
- Amazon Rekognition Video provides a **stream processor** (CreateStreamProcessor) that you can use to start and manage the analysis of streaming video.

## Enabling all features in your Organization
AWS Organizations has two available feature sets:
1. `All features` – This feature set is the **preferred** way to work with AWS Organizations, and it includes consolidating billing features. When you create an organization, enabling all features is the default. With all features enabled, you can use the advanced account management features available in AWS Organizations such as service control policies (SCPs) and tag policies.
2. `Consolidated billing features` – All organizations support this subset of features, which provides basic management tools that you can use to centrally manage the accounts in your organization.

If you create an organization with consolidated billing features only, you can later enable all features. You don't need to re-create your Organization.

## Amazon Data Lifecycle Manager
- You can use Amazon Data Lifecycle Manager to automate the **creation, retention, and deletion** of EBS snapshots and EBS-backed AMIs.
- Amazon Data Lifecycle Manager (Amazon DLM) is an automated procedure to back up the data stored on your **Amazon EBS volumes**. Use Amazon DLM to create lifecycle policies to automate snapshot management.
- Amazon Data Lifecycle Manager cannot be used to manage snapshots or AMIs that are created by any other means.
- Amazon Data Lifecycle Manager cannot be used to automate the creation, retention, and deletion of instance store-backed AMIs.

## API Gateway Responses 
### Method Response
An API method response encapsulates the output of an API method request that the client will receive. The output data includes:
1. An HTTP status code, 
2. Some headers,
3. Possibly a body.

### Integration Respoonse
- For a non-proxy integration, you must set up **at least one integration response**, and make it the default response, to pass the result returned from the backend to the client. You can choose to pass through the result as-is or to *transform the integration response data to the method response data* if the two have different formats.
- For a proxy integration, API Gateway automatically passes the backend output to the client as an HTTP response. You do not set either an integration response or a method response.

## VPC Endpoint Policy
- A VPC endpoint policy is an **IAM resource policy** that you attach to an endpoint when you create or modify the endpoint. 
- If you do not attach a policy when you create an endpoint, we attach a default policy for you that allows full access to the service. 
- An endpoint policy does not override or replace IAM user policies or service-specific policies (such as S3 bucket policies). It is a separate policy for controlling access from the endpoint to the specified service.
- You cannot attach more than one policy to an endpoint. However, you can modify the policy at any time. 

## Amazon Managed Blockchain
- Blockchain makes it possible to build applications where multiple parties can **execute transactions** without the need for a trusted, central authority. 
- It manages your certificates and lets you easily invite new members to join the network.

## Use Direct Connect to access VPC in multiple regions
- The Direct Connect gateway enables you to use your AWS Direct Connect connection in the US East (N. Virginia) Region to access VPCs in your account in both the US East (N. Virginia) and US West (N. California) Regions:

<img src="https://docs.aws.amazon.com/directconnect/latest/UserGuide/images/dx-gateway.png" alt="" width="700px"/>

- Each VPC has a **virtual private gateway (VGW)** that connects to the **Direct Connect gateway** using a virtual private gateway association. 
- The Direct Connect gateway uses a **private virtual interface (VIF)** for the connection to the AWS Direct Connect location. There is an AWS Direct Connect connection from the location to the customer data center.

## Creating an AWS account in your organization
An organization is a collection of AWS accounts that you centrally manage. You can perform the following procedures to manage the accounts that are part of your organization:
- Creating an AWS account that is part of your organization
- Accessing a member account that has a management account access role.

When signed in to the organization's management account, you can create member accounts that are automatically part of your organization.






